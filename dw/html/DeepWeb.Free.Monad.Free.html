<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>DeepWeb.Free.Monad.Free</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library DeepWeb.Free.Monad.Free</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab1"></a><h1 class="section">Abstract Monad infrastructure for ITrees.</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Contextual</span> <span class="id" title="keyword">Implicit</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="var">From</span> <span class="id" title="var">Custom</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Custom.Monad.html#"><span class="id" title="library">Monad</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">MonadNotations</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">monad_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab2"></a><h2 class="section">Basic Definitions</h2>

<div class="paragraph"> </div>

 The core definition of ITrees.  An <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a></span> <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Semantics.html#Sem.E"><span class="id" title="variable">E</span></a></span> <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Common.html#Zip.X"><span class="id" title="variable">X</span></a></span> is the denotation of a
    program as coinductive (possibly infinite) tree where the leaves
    are labeled with <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Common.html#Zip.X"><span class="id" title="variable">X</span></a></span> and every node is either an "internal" <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a></span>
    node with one child, or a "external" <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a></span> node with a visible
    event of type <span class="inlinecode"><a class="idref" href="DeepWeb.Lib.SimpleSpec_Observer.html#Event"><span class="id" title="constructor">Event</span></a></span> <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Common.html#Zip.Y"><span class="id" title="variable">Y</span></a></span> plus a continuation <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Free.html#k"><span class="id" title="variable">k</span></a></span> that receives a
    <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Common.html#Zip.Y"><span class="id" title="variable">Y</span></a></span> value from the event. 
</div>
<div class="code">
<span class="id" title="keyword">CoInductive</span> <a name="M"><span class="id" title="inductive">M</span></a> (<span class="id" title="var">Event</span> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) <span class="id" title="var">X</span> :=<br/>
| <a name="Ret"><span class="id" title="constructor">Ret</span></a> (<span class="id" title="var">x</span>:<a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>)<br/>
| <a name="Vis"><span class="id" title="constructor">Vis</span></a> {<span class="id" title="var">Y</span>: <span class="id" title="keyword">Type</span>} (<span class="id" title="var">e</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#Event"><span class="id" title="variable">Event</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a>) (<span class="id" title="var">k</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Event"><span class="id" title="variable">Event</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>)<br/>
| <a name="Tau"><span class="id" title="constructor">Tau</span></a> (<span class="id" title="var">k</span>: <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Event"><span class="id" title="variable">Event</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>).<br/>

<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a></span> is known as the "Freer monad".

<div class="paragraph"> </div>

    "Freer Monads, More Extensible Effects", Oleg Kiselyov, Hiromi
    Ishii.

<div class="paragraph"> </div>

    Abstract nonsense: The <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a></span> constructor corresponds to a free
    functor construction also called Co-Yoneda or left Kan extension.
    Note that <span class="inlinecode"><a class="idref" href="DeepWeb.Lib.SimpleSpec_Observer.html#Event"><span class="id" title="constructor">Event</span></a></span> is meant to be an indexed type, and generally
    not a functor, but we have a monad in any case.

<div class="paragraph"> </div>

    Some relevant links to variations of this theme can be found in
    http://reddit6.com/r/haskell/comments/7q4sku/are_people_using_freer_monads_or_still_mostly/ 
</div>
<div class="code">

<br/>

<br/>

<br/>

<br/>
</div>

<div class="doc">
<a name="lab3"></a><h2 class="section">Monad Structure</h2>

<div class="paragraph"> </div>

 First, we show that <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a></span> <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Semantics.html#Sem.E"><span class="id" title="variable">E</span></a></span> forms a <span class="inlinecode"><a class="idref" href="Custom.Monad.html#Monad"><span class="id" title="record">Monad</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a name="Core"><span class="id" title="module">Core</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Core.bind_body"><span class="id" title="definition">bind_body</span></a> {<span class="id" title="var">E</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">go</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a>) : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">e</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#go"><span class="id" title="variable">go</span></a> (<span class="id" title="var">k</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#y"><span class="id" title="variable">y</span></a>))<br/>
&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">k</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#go"><span class="id" title="variable">go</span></a> <span class="id" title="var">k</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Core.bindM"><span class="id" title="definition">bindM</span></a> {<span class="id" title="var">E</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>} (<span class="id" title="var">s</span>: <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>) (<span class="id" title="var">t</span>: <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a>) : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a> :=<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">cofix</span> <span class="id" title="var">go</span> (<span class="id" title="var">s</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Free.html#Core.bind_body"><span class="id" title="definition">bind_body</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#go"><span class="id" title="variable">go</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#t"><span class="id" title="variable">t</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Free.html#s"><span class="id" title="variable">s</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Core.Monad_M"><span class="id" title="definition">Monad_M</span></a> <span class="id" title="var">E</span> : <a class="idref" href="Custom.Monad.html#Monad"><span class="id" title="class">Monad</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Custom.Monad.html#Build_Monad"><span class="id" title="constructor">Build_Monad</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#x"><span class="id" title="variable">x</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="DeepWeb.Free.Monad.Free.html#Core.bindM"><span class="id" title="definition">bindM</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Core"><span class="id" title="module">Core</span></a>.<br/>

<br/>
</div>

<div class="doc">
Now we slightly change the bind operation to insert a <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a></span> in the
    case where the right-hand argument to bind is just a <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a></span>, to
    make programs/specifications neater and easier to write. This
    makes <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a></span> no longer a monad structurally, but it remains one in a
    looser sense as long as <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a></span> is interpreted as the identity. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="bindM"><span class="id" title="definition">bindM</span></a> {<span class="id" title="var">E</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>} (<span class="id" title="var">s</span>: <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>) (<span class="id" title="var">t</span>: <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a>) : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Free.html#bindM"><span class="id" title="definition">Core.bindM</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#x"><span class="id" title="variable">x</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a name="Monad_M"><span class="id" title="instance">Monad_M</span></a> <span class="id" title="var">E</span> : <a class="idref" href="Custom.Monad.html#Monad"><span class="id" title="class">Monad</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a>) := { <a class="idref" href="Custom.Monad.html#ret"><span class="id" title="method">ret</span></a> <span class="id" title="var">X</span> <span class="id" title="var">x</span> := <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#x"><span class="id" title="variable">x</span></a>; <a class="idref" href="Custom.Monad.html#bind"><span class="id" title="method">bind</span></a> := @<a class="idref" href="DeepWeb.Free.Monad.Free.html#bindM"><span class="id" title="definition">bindM</span></a> <span class="id" title="var">E</span> }.<br/>

<br/>
</div>

<div class="doc">
<a name="lab4"></a><h2 class="section">Handy Utilities</h2>

<div class="paragraph"> </div>

 Wrap a function around the results returned from an ITree 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="mapM"><span class="id" title="definition">mapM</span></a> {<span class="id" title="var">E</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>: <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a>) (<span class="id" title="var">s</span>: <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>) : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a> :=<br/>
<span class="id" title="keyword">let</span> <span class="id" title="keyword">cofix</span> <span class="id" title="var">go</span> (<span class="id" title="var">s</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">e</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#go"><span class="id" title="variable">go</span></a> (<span class="id" title="var">k</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#y"><span class="id" title="variable">y</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">k</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#go"><span class="id" title="variable">go</span></a> <span class="id" title="var">k</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
<span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#go"><span class="id" title="variable">go</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#s"><span class="id" title="variable">s</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="forM"><span class="id" title="definition">forM</span></a> {<span class="id" title="var">M</span> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<span class="id" title="var">MM</span> : <a class="idref" href="Custom.Monad.html#Monad"><span class="id" title="class">Monad</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="variable">M</span></a>} {<span class="id" title="var">X</span> <span class="id" title="var">Y</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>) (<span class="id" title="var">f</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="variable">M</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="Custom.Monad.html#ret"><span class="id" title="method">ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">xs</span> ⇒ <span class="id" title="var">y</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">x</span><a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a> <span class="id" title="var">ys</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#forM"><span class="id" title="definition">forM</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#f"><span class="id" title="variable">f</span></a><a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a> <a class="idref" href="Custom.Monad.html#ret"><span class="id" title="method">ret</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#ys"><span class="id" title="variable">ys</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Ignore the results from an ITree (changing it to have <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a></span> result type) 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="ignore"><span class="id" title="definition">ignore</span></a> {<span class="id" title="var">E</span> <span class="id" title="var">X</span>} : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> := <a class="idref" href="DeepWeb.Free.Monad.Free.html#mapM"><span class="id" title="definition">mapM</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>).<br/>

<br/>
</div>

<div class="doc">
An ITree representing an infinite loop 
</div>
<div class="code">
<span class="id" title="keyword">CoFixpoint</span> <a name="spin"><span class="id" title="definition">spin</span></a> {<span class="id" title="var">E</span>} {<span class="id" title="var">X</span>} : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> := <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#spin"><span class="id" title="definition">spin</span></a>.<br/>
</div>

<div class="doc">
An ITree that does one internal step and then returns. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="tick"><span class="id" title="definition">tick</span></a> {<span class="id" title="var">E</span>} : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> := <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>).<br/>

<br/>
</div>

<div class="doc">
Lift a single event to an <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a></span> action. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="liftE"><span class="id" title="definition">liftE</span></a> <span class="id" title="var">Event</span> <span class="id" title="var">X</span> (<span class="id" title="var">e</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#Event"><span class="id" title="variable">Event</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>) : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Event"><span class="id" title="variable">Event</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#e"><span class="id" title="variable">e</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#x"><span class="id" title="variable">x</span></a>).<br/>

<br/>
</div>

<div class="doc">
The void type is useful as a return type to <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a></span>, to enforce the
    constraint that a given computation should never terminate. 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a name="void"><span class="id" title="inductive">void</span></a> : <span class="id" title="keyword">Type</span> := .<br/>

<br/>
<span class="id" title="keyword">CoFixpoint</span> <a name="forever"><span class="id" title="definition">forever</span></a> {<span class="id" title="var">E</span>} {<span class="id" title="var">X</span>} (<span class="id" title="var">x</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>) : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#void"><span class="id" title="inductive">void</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Free.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Custom.Monad.html#617d4c2635d7166c8606c5fbf0f2733e"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#forever"><span class="id" title="definition">forever</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#x"><span class="id" title="variable">x</span></a>.<br/>

<br/>
</div>

<div class="doc">
An infinite loop with a given body that obviously never returns. 
</div>
<div class="code">
<span class="id" title="keyword">CoFixpoint</span> <a name="loop"><span class="id" title="definition">loop</span></a> {<span class="id" title="var">E</span> <span class="id" title="var">void</span>} (<span class="id" title="var">body</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#void"><span class="id" title="variable">void</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Free.html#body"><span class="id" title="variable">body</span></a><a class="idref" href="Custom.Monad.html#617d4c2635d7166c8606c5fbf0f2733e"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#loop"><span class="id" title="definition">loop</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#body"><span class="id" title="variable">body</span></a>.<br/>

<br/>
</div>

<div class="doc">
A one-sided conditional. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="when"><span class="id" title="definition">when</span></a> {<span class="id" title="var">E</span>} (<span class="id" title="var">b</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<span class="id" title="var">body</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#body"><span class="id" title="variable">body</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="Custom.Monad.html#ret"><span class="id" title="method">ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>

<br/>
</div>

<div class="doc">
An imperative loop over a list. 
</div>
<div class="code">
<span class="id" title="keyword">CoFixpoint</span> <a name="for_each"><span class="id" title="definition">for_each</span></a> {<span class="id" title="var">E</span> <span class="id" title="var">A</span>} (<span class="id" title="var">bs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">body</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#bs"><span class="id" title="variable">bs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="Custom.Monad.html#ret"><span class="id" title="method">ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">bs'</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#body"><span class="id" title="variable">body</span></a> <span class="id" title="var">b</span><a class="idref" href="Custom.Monad.html#617d4c2635d7166c8606c5fbf0f2733e"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#for_each"><span class="id" title="definition">for_each</span></a> <span class="id" title="var">bs'</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#body"><span class="id" title="variable">body</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab5"></a><h1 class="section">More stuff</h1>

<div class="paragraph"> </div>

 If we can interpret the events of one such monad as
    computations in another, we can extend that
    interpretation to the whole monad. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="hom"><span class="id" title="definition">hom</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">E1</span> <span class="id" title="var">E2</span> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">X</span>, <a class="idref" href="DeepWeb.Free.Monad.Free.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">R</span>, <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#R"><span class="id" title="variable">R</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">cofix</span> <span class="id" title="var">hom_</span> <span class="id" title="var">R</span> (<span class="id" title="var">p</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#R"><span class="id" title="variable">R</span></a>) : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#R"><span class="id" title="variable">R</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#bindM"><span class="id" title="definition">bindM</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">_</span> <span class="id" title="var">e</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#hom_"><span class="id" title="variable">hom_</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">k</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#x"><span class="id" title="variable">x</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">k</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#hom_"><span class="id" title="variable">hom_</span></a> <span class="id" title="var">_</span> <span class="id" title="var">k</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#hom"><span class="id" title="definition">hom</span></a> {<span class="id" title="var">E1</span> <span class="id" title="var">E2</span>} <span class="id" title="var">f</span> {<span class="id" title="var">R</span>}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="hom_state"><span class="id" title="definition">hom_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">E1</span> <span class="id" title="var">E2</span> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">S</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">X</span>, <a class="idref" href="DeepWeb.Free.Monad.Free.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E2"><span class="id" title="variable">E2</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>)) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">R</span>, <a class="idref" href="DeepWeb.Free.Monad.Free.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E2"><span class="id" title="variable">E2</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#R"><span class="id" title="variable">R</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">cofix</span> <span class="id" title="var">hom_</span> <span class="id" title="var">R</span> <span class="id" title="var">s</span> (<span class="id" title="var">p</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#R"><span class="id" title="variable">R</span></a>) : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E2"><span class="id" title="variable">E2</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#R"><span class="id" title="variable">R</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Free.Monad.Free.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#bindM"><span class="id" title="definition">bindM</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="var">e</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">sa</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#hom_"><span class="id" title="variable">hom_</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#sa"><span class="id" title="variable">sa</span></a>) (<span class="id" title="var">k</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#sa"><span class="id" title="variable">sa</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">k</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#hom_"><span class="id" title="variable">hom_</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="var">k</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">CoFixpoint</span> <a name="hoist"><span class="id" title="definition">hoist</span></a> {<span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">Z</span>, <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Z"><span class="id" title="variable">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Z"><span class="id" title="variable">Z</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">m</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">_</span> <span class="id" title="var">e</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#hoist"><span class="id" title="definition">hoist</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#f"><span class="id" title="variable">f</span></a> (<span class="id" title="var">k</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#z"><span class="id" title="variable">z</span></a>))<br/>
&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">n</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#hoist"><span class="id" title="definition">hoist</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="fold_finite"><span class="id" title="definition">fold_finite</span></a> {<span class="id" title="var">E</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">default</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#R"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ret_</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#R"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">X</span>, <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#R"><span class="id" title="variable">R</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#R"><span class="id" title="variable">R</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#R"><span class="id" title="variable">R</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">fold_</span> <span class="id" title="var">max_depth</span> <span class="id" title="var">t</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#max_depth"><span class="id" title="variable">max_depth</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#default"><span class="id" title="variable">default</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">max_depth</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#ret_"><span class="id" title="variable">ret_</span></a> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#fold_"><span class="id" title="variable">fold_</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#max_depth"><span class="id" title="variable">max_depth</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#t"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">_</span> <span class="id" title="var">e</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#fold_"><span class="id" title="variable">fold_</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#max_depth"><span class="id" title="variable">max_depth</span></a> (<span class="id" title="var">k</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#x"><span class="id" title="variable">x</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="collapse_root"><span class="id" title="definition">collapse_root</span></a> {<span class="id" title="var">E</span> <span class="id" title="var">X</span>} (<span class="id" title="var">fuel</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">m</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>) : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#fuel"><span class="id" title="variable">fuel</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#m"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">fuel'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">m'</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#collapse_root"><span class="id" title="definition">collapse_root</span></a> <span class="id" title="var">fuel'</span> <span class="id" title="var">m'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#m"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">CoFixpoint</span> <a name="collapse"><span class="id" title="definition">collapse</span></a> {<span class="id" title="var">E</span> <span class="id" title="var">X</span>} (<span class="id" title="var">refuel</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">m</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>) : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#collapse_root"><span class="id" title="definition">collapse_root</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#refuel"><span class="id" title="variable">refuel</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">m'</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#collapse"><span class="id" title="definition">collapse</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#refuel"><span class="id" title="variable">refuel</span></a> <span class="id" title="var">m'</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">e</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#collapse"><span class="id" title="definition">collapse</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#refuel"><span class="id" title="variable">refuel</span></a> (<span class="id" title="var">k</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#z"><span class="id" title="variable">z</span></a>))<br/>
&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="MORE"><span class="id" title="module">MORE</span></a>.<br/>

<br/>
</div>

<div class="doc">
Some more interesting algebraic structure.  This is not
    immediately useful for zipping tests and programs because there
    are things in tests that we do not want to zip with anything in
    the program.  Might be useful later for something, though. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="MORE.Pair1"><span class="id" title="inductive">Pair1</span></a> (<span class="id" title="var">E1</span> <span class="id" title="var">E2</span>: <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;| <a name="MORE.pair1"><span class="id" title="constructor">pair1</span></a> {<span class="id" title="var">X</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">e1</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>) (<span class="id" title="var">e2</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a>) : <a class="idref" href="DeepWeb.Free.Monad.Free.html#Pair1"><span class="id" title="inductive">Pair1</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E2"><span class="id" title="variable">E2</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a>).<br/>

<br/>
</div>

<div class="doc">
If we can interpret two infinite streams with different events as one
    where we line up the events in lockstep. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="MORE.lockstep"><span class="id" title="definition">lockstep</span></a> {<span class="id" title="var">E1</span> <span class="id" title="var">E2</span> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<span class="id" title="var">X</span>} : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#MORE.Pair1"><span class="id" title="inductive">Pair1</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E2"><span class="id" title="variable">E2</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">cofix</span> <span class="id" title="var">go</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#p1"><span class="id" title="variable">p1</span></a>, <a class="idref" href="DeepWeb.Free.Monad.Free.html#p2"><span class="id" title="variable">p2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">p1'</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#go"><span class="id" title="variable">go</span></a> <span class="id" title="var">p1'</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#p2"><span class="id" title="variable">p2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">p2'</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#go"><span class="id" title="variable">go</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#p1"><span class="id" title="variable">p1</span></a> <span class="id" title="var">p2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">x</span>,<span class="id" title="var">_</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">p1k</span>, <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">e2</span> <span class="id" title="var">p2k</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#MORE.pair1"><span class="id" title="constructor">pair1</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#go"><span class="id" title="variable">go</span></a> (<span class="id" title="var">p1k</span> <span class="id" title="var">x</span>) (<span class="id" title="var">p2k</span> <span class="id" title="var">y</span>) <span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
</div>

<div class="doc">
There are a few variants depending on which return values we want
    to to force to be void. But this seems to be the most general
    one.
</div>
<div class="code">

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#MORE"><span class="id" title="module">MORE</span></a>.<br/>

<br/>
</div>

<div class="doc">
In order to unfold a cofixpoint we have to rewrite it with
    <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Free.html#matchM"><span class="id" title="lemma">matchM</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a name="idM"><span class="id" title="abbreviation">idM</span></a> <span class="id" title="var">i</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;| @<span class="id" title="var">Vis</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Y</span> <span class="id" title="var">e</span> <span class="id" title="var">k</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span><br/>
&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">k</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">k</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="matchM"><span class="id" title="lemma">matchM</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">E</span> <span class="id" title="var">X</span> (<span class="id" title="var">i</span>: <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a>), <a class="idref" href="DeepWeb.Free.Monad.Free.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#idM"><span class="id" title="abbreviation">idM</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#i"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="bind_def_core"><span class="id" title="lemma">bind_def_core</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">E</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">s</span> (<span class="id" title="var">k</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Free.html#bindM"><span class="id" title="definition">Core.bindM</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#bind_body"><span class="id" title="definition">Core.bind_body</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#bindM"><span class="id" title="definition">Core.bindM</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Free.html#k"><span class="id" title="variable">k</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#matchM"><span class="id" title="lemma">matchM</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (@<a class="idref" href="DeepWeb.Free.Monad.Free.html#matchM"><span class="id" title="lemma">matchM</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">k</span> <span class="id" title="var">x</span>)) <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="bind_def"><span class="id" title="lemma">bind_def</span></a> <span class="id" title="var">E</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> (<span class="id" title="var">k</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#Y"><span class="id" title="variable">Y</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Free.html#bindM"><span class="id" title="definition">bindM</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#bind_body"><span class="id" title="definition">Core.bind_body</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s'</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#bindM"><span class="id" title="definition">bindM</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#k"><span class="id" title="variable">k</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#x"><span class="id" title="variable">x</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#bindM"><span class="id" title="definition">bindM</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#bind_def_core"><span class="id" title="lemma">bind_def_core</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>